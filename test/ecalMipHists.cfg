
process ECALMIPHISTS = { 

	
	service = MessageLogger {
		untracked vstring destinations = {"cerr.log" }

		untracked PSet cout.log = { untracked string threshold = "DEBUG"}
		untracked PSet cerr.log = { untracked string threshold = "ERROR" }
	}  


	include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerMapping.cfi"
	include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerData.cfi" 

	include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
	include "Geometry/EcalCommonData/data/EcalOnly.cfi"
	include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

	untracked PSet maxEvents = {untracked int32 input =2}

	source = PoolSource {
		untracked uint32 skipEvents =1 
		#untracked vstring fileNames = { 'rfio:/castor/cern.ch/user/d/doglioni/P5_Co.00031949.A.0.0.root'}
		untracked vstring fileNames = { 'rfio:/castor/cern.ch/user/d/doglioni/february/ecal_local.00035086.0001.A.storageManager.0.0000.root'}

		#untracked vstring fileNames = { 'file:cosmics.root' }
		untracked bool   debugFlag     = true
	}

	module ecalUncalibHit = ecalMaxSampleUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalMaxSampleUncalibRecHit.cfi"
	#module ecalUncalibHit = ecalFixedAlphaBetaFitUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalFixedAlphaBetaFitUncalibRecHit.cfi"
	replace ecalUncalibHit.EBdigiCollection = ecalEBunpacker:ebDigis
	replace ecalUncalibHit.EEdigiCollection = ecalEBunpacker:eeDigis

	es_source src1 = EcalTrivialConditionRetriever{

		untracked vdouble amplWeights = { -0.333, -0.333, -0.333,
						0.000,  0.000,  1.000,
						0.000,  0.000,  0.000,  0.000 }

		untracked vdouble pedWeights  = {  0.333,  0.333,  0.333,
						0.000,  0.000,  0.000,
						0.000,  0.000,  0.000,  0.000 }

		untracked vdouble jittWeights = {  0.040,  0.040,  0.040,
						0.000,  1.320, -0.050,
						-0.500, -0.500, -0.400,  0.000 }
 	}


	include "CaloOnlineTools/EcalTools/data/ecalMipHists.cfi"
	#replace ecalMipGraphs.maskedChannels = {${mcry}}
	#replace ecalMipGraphs.maskedFEDs = {${mfed}}
	#replace ecalMipGraphs.maskedEBs = {"${mieb}"}
	#replace ecalMipGraphs.amplitudeThreshold = $threshold
	#replace ecalMipGraphs.fileName =  '$data_file.$$.graph'
	#replace ecalMipGraphs.side = $side
	#replace ecalMipGraphs.seedCry = $seed_cry
      

	service = TFileService {
		string fileName = "/afs/cern.ch/user/d/doglioni/scratch0/histo35086.root"
	}

	path p = {ecalEBunpacker, ecalUncalibHit, ecalMipHists}

}
